<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI åˆ†æ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: #F7F8FA;
        }
        .container {
            max-width: 430px;
            margin: 0 auto;
            background: #F7F8FA;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .nav {
            background: white;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 1px 0 rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .nav-title {
            flex: 1;
            text-align: center;
            font-size: 17px;
            font-weight: 600;
            color: #1F2D3D;
        }
        .chat {
            flex: 1;
            padding: 16px;
            overflow-y: auto;
        }
        .message {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            animation: slideIn 0.3s ease-out;
        }
        .message.user {
            flex-direction: row-reverse;
        }
        .message.user .message-content {
            text-align: right;
        }
        .message.user .message-text {
            background: #EB3223;
            color: white;
            border-radius: 16px 16px 4px 16px;
        }
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, #EB3223 0%, #FF6B6B 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
            flex-shrink: 0;
        }
        .message-content {
            max-width: calc(100% - 46px);
        }
        .message-text {
            background: white;
            padding: 12px 16px;
            border-radius: 16px 16px 16px 4px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            font-size: 15px;
            line-height: 1.6;
            color: #1F2D3D;
        }
        .chart-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            margin-top: 4px;
        }
        .section-header {
            font-size: 14px;
            font-weight: 600;
            color: #1F2D3D;
            margin-bottom: 12px;
        }
        .data-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 13px;
        }
        .data-label {
            color: #8A8F99;
        }
        .data-value {
            font-weight: 600;
            color: #1F2D3D;
        }
        .success { color: #4CAF50; }
        .danger { color: #F44336; }
        .divider {
            height: 1px;
            background: #E5E8EB;
            margin: 12px 0;
        }
        .btn {
            background: #EB3223;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }
        .btn:hover {
            background: #d42a1c;
        }
        /* è¡¨å•æ ·å¼ */
        .form-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            margin-top: 4px;
        }
        .form-group {
            margin-bottom: 12px;
        }
        .form-label {
            display: block;
            font-size: 13px;
            font-weight: 500;
            color: #1F2D3D;
            margin-bottom: 6px;
        }
        .form-select, .form-input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #EDEFF2;
            border-radius: 8px;
            font-size: 14px;
            color: #1F2D3D;
            background: white;
        }
        .form-select:focus, .form-input:focus {
            outline: none;
            border-color: #EB3223;
        }
        /* è´¦å•æ£€æŸ¥åˆ—è¡¨ */
        .bill-checklist {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin: 12px 0;
        }
        .bill-check-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px;
            background: #F7F8FA;
            border-radius: 8px;
            border: 1px solid #EDEFF2;
        }
        .bill-check-item input[type="checkbox"] {
            margin-top: 4px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        .bill-info {
            flex: 1;
            cursor: pointer;
        }
        .bill-platform {
            font-size: 14px;
            font-weight: 600;
            color: #1F2D3D;
            margin-bottom: 4px;
        }
        .bill-details {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        .bill-amount {
            font-size: 14px;
            font-weight: 600;
            color: #EB3223;
        }
        .bill-due {
            font-size: 12px;
            color: #8A8F99;
        }
        .bill-section-title {
            font-size: 13px;
            font-weight: 600;
            color: #1F2D3D;
            margin-bottom: 10px;
            padding: 8px 12px;
            background: #F7F8FA;
            border-radius: 6px;
        }
        .form-note {
            font-size: 12px;
            color: #8A8F99;
            margin-top: 8px;
            padding-left: 4px;
        }
        .detail-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            background: #F7F8FA;
            border-radius: 6px;
            margin-bottom: 8px;
        }
        .detail-label {
            font-size: 14px;
            font-weight: 500;
            color: #1F2D3D;
        }
        .detail-value {
            font-size: 14px;
            font-weight: 600;
        }
        .detail-value.income {
            color: #4CAF50;
        }
        .detail-value.expense {
            color: #EB3223;
        }
        .detail-item.total {
            background: white;
            border: 2px solid #EDEFF2;
            margin-top: 8px;
        }
        .detail-value-group {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        .detail-sub {
            font-size: 11px;
            color: #8A8F99;
        }
        /* æ–°å¢æ”¶å…¥é¡¹æ ·å¼ */
        .new-income-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 12px;
            background: #F0FFF4;
            border-radius: 6px;
            border: 1px solid #E8F5E9;
        }
        .new-income-info {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
        }
        .new-income-type {
            font-size: 13px;
            font-weight: 500;
            color: #1F2D3D;
        }
        .new-income-amount {
            font-size: 13px;
            font-weight: 600;
            color: #4CAF50;
        }
        .new-income-date {
            font-size: 11px;
            color: #8A8F99;
            background: white;
            padding: 2px 6px;
            border-radius: 4px;
        }
        .remove-btn {
            background: none;
            border: none;
            font-size: 18px;
            color: #EB3223;
            cursor: pointer;
            padding: 0 4px;
            font-weight: 600;
            line-height: 1;
        }
        .remove-btn:hover {
            color: #D32F2F;
        }
        /* æŠ¥å‘Šæ¨¡å—æ ·å¼ */
        .report-section {
            margin-bottom: 16px;
        }
        .report-section-title {
            font-size: 16px;
            font-weight: 700;
            color: #1F2D3D;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 2px solid #EB3223;
        }
        .badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 11px;
            font-weight: 600;
            margin-left: 6px;
        }
        .badge-green {
            background: #E8F5E9;
            color: #4CAF50;
        }
        .badge-orange {
            background: #FFF3E0;
            color: #FF9800;
        }
        .badge-red {
            background: #FFEBEE;
            color: #F44336;
        }
        .badge-yellow {
            background: #FFFDE7;
            color: #FBC02D;
        }
        .priority-item {
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid;
        }
        .priority-high {
            background: #FFEBEE;
            border-color: #F44336;
        }
        .priority-medium {
            background: #FFF3E0;
            border-color: #FF9800;
        }
        .priority-low {
            background: #E8F5E9;
            border-color: #4CAF50;
        }
        .priority-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
        }
        .priority-platform {
            font-size: 14px;
            font-weight: 600;
            color: #1F2D3D;
        }
        .priority-amount {
            font-size: 15px;
            font-weight: 700;
            color: #EB3223;
        }
        .priority-reason {
            font-size: 12px;
            color: #8A8F99;
            line-height: 1.5;
        }
        .credit-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 12px;
            background: #F7F8FA;
            border-radius: 6px;
            margin-bottom: 8px;
        }
        .credit-platform {
            font-size: 14px;
            font-weight: 600;
            color: #1F2D3D;
        }
        .credit-details {
            font-size: 12px;
            color: #8A8F99;
        }
        .strategy-card {
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid;
        }
        .strategy-green {
            background: #E8F5E9;
            border-color: #4CAF50;
        }
        .strategy-orange {
            background: #FFF3E0;
            border-color: #FF9800;
        }
        .suggestion-item {
            display: flex;
            gap: 8px;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 6px;
        }
        .suggestion-blue {
            background: #E3F2FD;
        }
        .suggestion-yellow {
            background: #FFFDE7;
        }
        .suggestion-purple {
            background: #F3E5F5;
        }
        .suggestion-icon {
            font-size: 16px;
            flex-shrink: 0;
        }
        .suggestion-text {
            font-size: 13px;
            color: #1F2D3D;
            line-height: 1.5;
        }
        .improvement-box {
            background: linear-gradient(135deg, #E8F5E9 0%, #FFFFFF 100%);
            border: 2px solid #4CAF50;
            border-radius: 8px;
            padding: 12px;
            margin-top: 12px;
        }
        .improvement-highlight {
            font-size: 15px;
            font-weight: 600;
            color: #4CAF50;
            margin-bottom: 8px;
        }
        .improvement-list {
            font-size: 13px;
            color: #1F2D3D;
            line-height: 1.8;
        }
        .improvement-list li {
            margin-bottom: 6px;
        }
        /* è¾“å…¥æ¡†æ ·å¼ */
        .input-area {
            background: white;
            padding: 12px 16px;
            border-top: 1px solid #EDEFF2;
            display: flex;
            gap: 8px;
            align-items: flex-end;
        }
        .input-wrapper {
            flex: 1;
            position: relative;
        }
        .chat-input {
            width: 100%;
            min-height: 44px;
            max-height: 120px;
            padding: 12px;
            border: 1px solid #EDEFF2;
            border-radius: 22px;
            font-size: 15px;
            color: #1F2D3D;
            background: #F7F8FA;
            resize: none;
            outline: none;
            box-sizing: border-box;
        }
        .chat-input:focus {
            background: white;
            border-color: #EB3223;
        }
        .send-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: #EB3223;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
            flex-shrink: 0;
        }
        .send-btn:hover {
            background: #d42a1c;
        }
        .send-btn:disabled {
            background: #E5E8EB;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="nav">
            <button onclick="goToIndex()" style="background:none;border:none;font-size:18px;color:#1F2D3D;cursor:pointer;padding:4px 8px;">â†</button>
            <div class="nav-title">AI åˆ†æ</div>
            <div style="width:36px;"></div>
        </nav>
        <div class="chat" id="chatContainer"></div>
        <div class="input-area">
            <div class="input-wrapper">
                <textarea 
                    id="chatInput" 
                    class="chat-input" 
                    placeholder="è¾“å…¥é—®é¢˜..." 
                    rows="1"
                    onkeydown="handleKeyDown(event)"
                ></textarea>
            </div>
            <button class="send-btn" id="sendBtn" onclick="sendMessage()">â¤</button>
        </div>
    </div>

    <script>
        // è¿”å›é¦–é¡µ
        function goToIndex() {
            window.location.href = 'index.html';
        }

        // é¡µé¢åŠ è½½ååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            initAnalysis();
        });

        function initAnalysis() {
            const urlParams = new URLSearchParams(window.location.search);
            const auto = urlParams.get('auto');

            if (auto === 'true') {
                autoShowReport();
            } else {
                showWelcome();
            }
        }

        function showWelcome() {
            const chatContainer = document.getElementById('chatContainer');
            chatContainer.innerHTML = `
                <div class="message">
                    <div class="avatar">AI</div>
                    <div class="message-content">
                        <div class="message-text">
                            ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„AIè´¢åŠ¡åŠ©æ‰‹ ğŸ˜Š<br><br>
                            æˆ‘å¯ä»¥å¸®ä½ ç”Ÿæˆè´¢åŠ¡åˆ†ææŠ¥å‘Šã€‚<br><br>
                            è®©æˆ‘å…ˆç¡®è®¤ä¸€ä¸‹ä½ çš„è´¦å•æƒ…å†µ...
                        </div>
                    </div>
                </div>
            `;
            setTimeout(() => {
                showBillsConfirmation();
            }, 500);
        }

        function autoShowReport() {
            const chatContainer = document.getElementById('chatContainer');
            chatContainer.innerHTML = `
                <div class="message">
                    <div class="avatar">AI</div>
                    <div class="message-content">
                        <div class="message-text">
                            ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„AIè´¢åŠ¡åŠ©æ‰‹ ğŸ˜Š<br><br>
                            æ­£åœ¨è‡ªåŠ¨ç”Ÿæˆåˆ†ææŠ¥å‘Š...
                        </div>
                    </div>
                </div>
            `;
            setTimeout(() => {
                showFullAnalysisReport();
            }, 500);
        }

        function showBillsConfirmation() {
            const chatContainer = document.getElementById('chatContainer');

            const billsHTML = `
                <div class="message">
                    <div class="avatar">AI</div>
                    <div class="message-content">
                        <div class="message-text">
                            æˆ‘æ‰¾åˆ°äº†ä½ çš„<strong>è´¦å•æ˜ç»†</strong>ï¼Œè¯·ç¡®è®¤å“ªäº›è´¦å•å·²ç»è¿˜æ¬¾ï¼š
                        </div>
                        <div class="form-card">
                            <div class="section-header">ğŸ“‹ è´¦å•ç¡®è®¤</div>

                            <!-- é€¾æœŸè´¦å• -->
                            <div style="margin-bottom: 16px;">
                                <div class="bill-section-title">ğŸ”´ é€¾æœŸè´¦å•ï¼ˆå·²è¿‡æˆªæ­¢æ—¥æœŸï¼‰</div>
                                <div class="bill-checklist">
                                    <div class="bill-check-item">
                                        <input type="checkbox" id="overdue1" class="bill-checkbox">
                                        <label for="overdue1" class="bill-info">
                                            <div class="bill-platform">Akulaku</div>
                                            <div class="bill-details">
                                                <span class="bill-amount">Rp 500,000</span>
                                                <span class="bill-due">åˆ°æœŸæ—¥ï¼š2024-01-05</span>
                                            </div>
                                        </label>
                                    </div>

                                    <div class="bill-check-item">
                                        <input type="checkbox" id="overdue2" class="bill-checkbox">
                                        <label for="overdue2" class="bill-info">
                                            <div class="bill-platform">Kredivo</div>
                                            <div class="bill-details">
                                                <span class="bill-amount">Rp 750,000</span>
                                                <span class="bill-due">åˆ°æœŸæ—¥ï¼š2024-01-03</span>
                                            </div>
                                        </label>
                                    </div>

                                    <div class="bill-check-item">
                                        <input type="checkbox" id="overdue3" class="bill-checkbox">
                                        <label for="overdue3" class="bill-info">
                                            <div class="bill-platform">Shopee Paylater</div>
                                            <div class="bill-details">
                                                <span class="bill-amount">Rp 300,000</span>
                                                <span class="bill-due">åˆ°æœŸæ—¥ï¼š2024-01-10</span>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                                <div class="form-note">å‹¾é€‰è¡¨ç¤ºå·²è¿˜æ¬¾</div>
                            </div>

                            <div class="divider"></div>

                            <!-- æœªåˆ°æœŸè´¦å• -->
                            <div style="margin-bottom: 16px;">
                                <div class="bill-section-title">ğŸŸ¢ æœªåˆ°æœŸè´¦å•ï¼ˆæœ¬æœˆå†…åˆ°æœŸï¼‰</div>
                                <div class="bill-checklist">
                                    <div class="bill-check-item">
                                        <input type="checkbox" id="upcoming1" class="bill-checkbox">
                                        <label for="upcoming1" class="bill-info">
                                            <div class="bill-platform">Kredivo åˆ†æœŸ</div>
                                            <div class="bill-details">
                                                <span class="bill-amount">Rp 1,200,000</span>
                                                <span class="bill-due">åˆ°æœŸæ—¥ï¼š2024-01-20</span>
                                            </div>
                                        </label>
                                    </div>

                                    <div class="bill-check-item">
                                        <input type="checkbox" id="upcoming2" class="bill-checkbox">
                                        <label for="upcoming2" class="bill-info">
                                            <div class="bill-platform">Akulaku åˆ†æœŸ</div>
                                            <div class="bill-details">
                                                <span class="bill-amount">Rp 800,000</span>
                                                <span class="bill-due">åˆ°æœŸæ—¥ï¼š2024-01-25</span>
                                            </div>
                                        </label>
                                    </div>

                                    <div class="bill-check-item">
                                        <input type="checkbox" id="upcoming3" class="bill-checkbox">
                                        <label for="upcoming3" class="bill-info">
                                            <div class="bill-platform">Indodana</div>
                                            <div class="bill-details">
                                                <span class="bill-amount">Rp 400,000</span>
                                                <span class="bill-due">åˆ°æœŸæ—¥ï¼š2024-01-28</span>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                                <div class="form-note">å‹¾é€‰è¡¨ç¤ºå·²æå‰è¿˜æ¬¾</div>
                            </div>

                            <button class="btn" onclick="confirmBills()">ç¡®è®¤</button>
                        </div>
                    </div>
                </div>
            `;

            chatContainer.innerHTML += billsHTML;
        }

        function confirmBills() {
            const chatContainer = document.getElementById('chatContainer');

            // æ”¶é›†è´¦å•çŠ¶æ€
            const overdueBills = [];
            const upcomingBills = [];
            const earlyRepaymentBills = [];

            const overdue1 = document.getElementById('overdue1').checked;
            const overdue2 = document.getElementById('overdue2').checked;
            const overdue3 = document.getElementById('overdue3').checked;

            if (overdue1) overdueBills.push('Akulaku');
            if (overdue2) overdueBills.push('Kredivo');
            if (overdue3) overdueBills.push('Shopee Paylater');

            const upcoming1 = document.getElementById('upcoming1').checked;
            const upcoming2 = document.getElementById('upcoming2').checked;
            const upcoming3 = document.getElementById('upcoming3').checked;

            if (upcoming1) earlyRepaymentBills.push('Kredivo åˆ†æœŸ');
            if (upcoming2) earlyRepaymentBills.push('Akulaku åˆ†æœŸ');
            if (upcoming3) earlyRepaymentBills.push('Indodana');

            const overdueAmounts = {
                'Akulaku': 500000,
                'Kredivo': 750000,
                'Shopee Paylater': 300000
            };
            const upcomingAmounts = {
                'Kredivo åˆ†æœŸ': 1200000,
                'Akulaku åˆ†æœŸ': 800000,
                'Indodana': 400000
            };

            let paidAmount = 0;
            overdueBills.forEach(bill => {
                paidAmount += overdueAmounts[bill] || 0;
            });
            earlyRepaymentBills.forEach(bill => {
                paidAmount += upcomingAmounts[bill] || 0;
            });

            sessionStorage.setItem('billsConfirmation', JSON.stringify({
                overdueBills,
                earlyRepaymentBills,
                paidAmount
            }));

            const confirmHTML = `
                <div class="message user">
                    <div class="avatar" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">æˆ‘</div>
                    <div class="message-content">
                        <div class="message-text">ç¡®è®¤è´¦å•</div>
                    </div>
                </div>
            `;

            chatContainer.innerHTML += confirmHTML;

            const replyHTML = `
                <div class="message">
                    <div class="avatar">AI</div>
                    <div class="message-content">
                        <div class="message-text">
                            å¥½çš„ï¼Œå·²è®°å½•ä½ çš„è´¦å•çŠ¶æ€ã€‚ç°åœ¨è®©æˆ‘æŸ¥çœ‹ä½ æœ¬æœˆçš„æ”¶å…¥å’Œæ”¯å‡ºæƒ…å†µ...
                        </div>
                    </div>
                </div>
            `;

            chatContainer.innerHTML += replyHTML;
            setTimeout(() => {
                showIncomeExpenseConfirmation();
            }, 500);
        }

        function showIncomeExpenseConfirmation() {
            const chatContainer = document.getElementById('chatContainer');

            const incomeExpenseHTML = `
                <div class="message">
                    <div class="avatar">AI</div>
                    <div class="message-content">
                        <div class="message-text">
                            ä»¥ä¸‹æ˜¯ä½ æœ¬æœˆçš„<strong>æ”¶å…¥å’Œæ”¯å‡º</strong>æ˜ç»†ï¼Œè¯·ç¡®è®¤æ˜¯å¦æœ‰å˜åŒ–ï¼š
                        </div>
                        <div class="form-card">
                            <div class="section-header">ğŸ’° æ”¶å…¥æ”¯å‡ºæ˜ç»†</div>

                            <div style="margin-bottom: 16px;">
                                <div class="section-title" style="font-size: 14px; font-weight: 600; margin-bottom: 10px;">æ”¶å…¥æ˜ç»†</div>

                                <div class="detail-item">
                                    <div class="detail-label">ä¹‹å‰ç»“ä½™</div>
                                    <div class="detail-value income">Rp 1,500,000</div>
                                </div>

                                <div class="detail-item">
                                    <div class="detail-label">å·¥èµ„</div>
                                    <div class="detail-value-group">
                                        <div class="detail-value income">Rp 7,000,000</div>
                                        <div class="detail-sub">25å·åˆ°è´¦</div>
                                    </div>
                                </div>

                                <div class="detail-item">
                                    <div class="detail-label">å¥–é‡‘</div>
                                    <div class="detail-value-group">
                                        <div class="detail-value income">Rp 1,000,000</div>
                                        <div class="detail-sub">25å·åˆ°è´¦</div>
                                    </div>
                                </div>

                                <div class="detail-item total">
                                    <div class="detail-label">æ”¶å…¥åˆè®¡</div>
                                    <div class="detail-value income">Rp 9,500,000</div>
                                </div>
                            </div>

                            <div class="divider"></div>

                            <div style="margin-bottom: 16px;">
                                <div class="section-title" style="font-size: 14px; font-weight: 600; margin-bottom: 10px;">æ”¯å‡ºæ˜ç»†</div>

                                <div class="detail-item">
                                    <div class="detail-label">å›ºå®šæ”¯å‡º</div>
                                    <div class="detail-value expense">Rp 4,000,000</div>
                                </div>

                                <div class="detail-item">
                                    <div class="detail-label">å¤§é¢æ”¯å‡º</div>
                                    <div class="detail-value expense">Rp 2,500,000</div>
                                </div>

                                <div class="detail-item total">
                                    <div class="detail-label">æ”¯å‡ºåˆè®¡</div>
                                    <div class="detail-value expense">Rp 6,500,000</div>
                                </div>
                            </div>

                            <div class="divider"></div>

                            <div class="form-group">
                                <label class="form-label">æœ¬æœˆçš„æ”¶å…¥å’Œæ”¯å‡ºä¸å¹³å¸¸ç›¸æ¯”æ˜¯å¦æœ‰å˜åŒ–ï¼Ÿ</label>
                                <select class="form-select" id="confirmChanges">
                                    <option value="no_change">æ²¡æœ‰å˜åŒ–</option>
                                    <option value="income_changed">æ”¶å…¥æœ‰å˜åŒ–</option>
                                    <option value="expense_changed">æ”¯å‡ºæœ‰å˜åŒ–</option>
                                    <option value="both_changed">æ”¶å…¥å’Œæ”¯å‡ºéƒ½æœ‰å˜åŒ–</option>
                                </select>
                            </div>

                            <div id="incomeChangeDetails" style="display: none;">
                                <div class="divider"></div>
                                <div class="section-title" style="font-size: 14px; font-weight: 600;">æ”¶å…¥å˜æ›´</div>

                                <div class="form-group">
                                    <label class="form-label">ä¹‹å‰ç»“ä½™</label>
                                    <input type="number" class="form-input" id="changeBalance" placeholder="è¾“å…¥ç»“ä½™é‡‘é¢" value="1500000">
                                </div>

                                <div class="form-group">
                                    <label class="form-label">å·¥èµ„ï¼ˆé‡‘é¢ + åˆ°è´¦æ—¥æœŸï¼‰</label>
                                    <div style="display: flex; gap: 8px;">
                                        <input type="number" class="form-input" id="changeSalary" placeholder="è¾“å…¥å·¥èµ„é‡‘é¢" value="7000000" style="flex: 2;">
                                        <select class="form-select" id="changeSalaryDate" style="flex: 1;">
                                            <option value="25å·">25å·</option>
                                            <option value="1å·">1å·</option>
                                            <option value="5å·">5å·</option>
                                            <option value="10å·">10å·</option>
                                            <option value="15å·">15å·</option>
                                            <option value="20å·">20å·</option>
                                            <option value="30å·">30å·</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">å¥–é‡‘ï¼ˆé‡‘é¢ + åˆ°è´¦æ—¥æœŸï¼‰</label>
                                    <div style="display: flex; gap: 8px;">
                                        <input type="number" class="form-input" id="changeBonus" placeholder="è¾“å…¥å¥–é‡‘é‡‘é¢" value="1000000" style="flex: 2;">
                                        <select class="form-select" id="changeBonusDate" style="flex: 1;">
                                            <option value="25å·">25å·</option>
                                            <option value="1å·">1å·</option>
                                            <option value="5å·">5å·</option>
                                            <option value="10å·">10å·</option>
                                            <option value="15å·">15å·</option>
                                            <option value="20å·">20å·</option>
                                            <option value="30å·">30å·</option>
                                            <option value="æ— ">æ— </option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">å…¶ä»–æ”¶å…¥ï¼ˆé‡‘é¢ + åˆ°è´¦æ—¥æœŸï¼‰</label>
                                    <div style="display: flex; gap: 8px;">
                                        <input type="number" class="form-input" id="changeOtherIncome" placeholder="è¾“å…¥å…¶ä»–æ”¶å…¥é‡‘é¢" value="0" style="flex: 2;">
                                        <select class="form-select" id="changeOtherIncomeDate" style="flex: 1;">
                                            <option value="å¾…ç¡®è®¤">å¾…ç¡®è®¤</option>
                                            <option value="1å·">1å·</option>
                                            <option value="5å·">5å·</option>
                                            <option value="10å·">10å·</option>
                                            <option value="15å·">15å·</option>
                                            <option value="20å·">20å·</option>
                                            <option value="25å·">25å·</option>
                                            <option value="30å·">30å·</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="divider"></div>
                                <div class="section-title" style="font-size: 14px; font-weight: 600;">æ–°å¢æ”¶å…¥</div>

                                <div class="form-group">
                                    <label class="form-label">æ”¶å…¥ç±»å‹</label>
                                    <select class="form-select" id="newIncomeType">
                                        <option value="">è¯·é€‰æ‹©æ”¶å…¥ç±»å‹</option>
                                        <option value="å…¼èŒ">å…¼èŒæ”¶å…¥</option>
                                        <option value="æŠ•èµ„">æŠ•èµ„æ”¶ç›Š</option>
                                        <option value="ç†è´¢">ç†è´¢æ”¶ç›Š</option>
                                        <option value="å‰¯ä¸š">å‰¯ä¸šæ”¶å…¥</option>
                                        <option value="å…¶ä»–">å…¶ä»–æ”¶å…¥</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">æ”¶å…¥é‡‘é¢ä¸åˆ°è´¦æ—¶é—´</label>
                                    <div style="display: flex; gap: 8px;">
                                        <input type="number" class="form-input" id="newIncomeAmount" placeholder="è¾“å…¥æ–°å¢æ”¶å…¥é‡‘é¢" style="flex: 2;">
                                        <select class="form-select" id="newIncomeDate" style="flex: 1;">
                                            <option value="å·²åˆ°è´¦">å·²åˆ°è´¦</option>
                                            <option value="1å·">1å·</option>
                                            <option value="5å·">5å·</option>
                                            <option value="10å·">10å·</option>
                                            <option value="15å·">15å·</option>
                                            <option value="20å·">20å·</option>
                                            <option value="25å·">25å·ï¼ˆå·¥èµ„æ—¥ï¼‰</option>
                                            <option value="30å·">30å·</option>
                                        </select>
                                    </div>
                                </div>

                                <button class="btn" style="margin-top: 8px; font-size: 14px; padding: 10px 16px;" onclick="addNewIncome()">+ æ·»åŠ æ–°å¢æ”¶å…¥</button>

                                <!-- å·²æ·»åŠ çš„æ–°å¢æ”¶å…¥åˆ—è¡¨ -->
                                <div id="newIncomeListContainer" style="display: none; margin-top: 12px;">
                                    <div class="divider" style="margin: 8px 0;"></div>
                                    <div class="section-title" style="font-size: 14px;">å·²æ·»åŠ çš„æ–°å¢æ”¶å…¥</div>
                                    <div id="newIncomeItems" style="display: flex; flex-direction: column; gap: 8px;"></div>
                                </div>
                            </div>

                            <div id="expenseChangeDetails" style="display: none;">
                                <div class="divider"></div>
                                <div class="section-title" style="font-size: 14px; font-weight: 600;">æ”¯å‡ºå˜æ›´</div>

                                <div class="form-group">
                                    <label class="form-label">å›ºå®šæ”¯å‡º</label>
                                    <input type="number" class="form-input" id="changeFixedExpense" placeholder="è¾“å…¥æ–°çš„å›ºå®šæ”¯å‡ºé‡‘é¢" value="4000000">
                                </div>

                                <div class="form-group">
                                    <label class="form-label">å¤§é¢æ”¯å‡º</label>
                                    <input type="number" class="form-input" id="changeLargeExpense" placeholder="è¾“å…¥æ–°çš„å¤§é¢æ”¯å‡ºé‡‘é¢" value="2500000">
                                </div>
                            </div>

                            <button class="btn" onclick="confirmIncomeExpense()">ç¡®è®¤ï¼Œå¼€å§‹åˆ†æ</button>
                        </div>
                    </div>
                </div>
            `;

            chatContainer.innerHTML += incomeExpenseHTML;

            document.getElementById('confirmChanges').addEventListener('change', function() {
                const incomeChangeDetails = document.getElementById('incomeChangeDetails');
                const expenseChangeDetails = document.getElementById('expenseChangeDetails');

                if (this.value === 'income_changed' || this.value === 'both_changed') {
                    incomeChangeDetails.style.display = 'block';
                } else {
                    incomeChangeDetails.style.display = 'none';
                }

                if (this.value === 'expense_changed' || this.value === 'both_changed') {
                    expenseChangeDetails.style.display = 'block';
                } else {
                    expenseChangeDetails.style.display = 'none';
                }
            });
        }

        // æ·»åŠ æ–°æ”¶å…¥
        function addNewIncome() {
            const type = document.getElementById('newIncomeType').value;
            const amount = document.getElementById('newIncomeAmount').value;
            const date = document.getElementById('newIncomeDate').value;

            if (!type || !amount) {
                alert('è¯·é€‰æ‹©æ”¶å…¥ç±»å‹å¹¶è¾“å…¥é‡‘é¢');
                return;
            }

            // è·å–å·²æ·»åŠ çš„æ”¶å…¥åˆ—è¡¨
            let newIncomeList = JSON.parse(sessionStorage.getItem('newIncomeList') || '[]');
            newIncomeList.push({ type, amount: parseFloat(amount), date });
            sessionStorage.setItem('newIncomeList', JSON.stringify(newIncomeList));

            // æ›´æ–°æ˜¾ç¤º
            updateNewIncomeDisplay();

            // æ¸…ç©ºè¾“å…¥
            document.getElementById('newIncomeType').value = '';
            document.getElementById('newIncomeAmount').value = '';
            document.getElementById('newIncomeDate').value = 'å·²åˆ°è´¦';
        }

        // æ›´æ–°æ–°æ”¶å…¥åˆ—è¡¨æ˜¾ç¤º
        function updateNewIncomeDisplay() {
            const newIncomeList = JSON.parse(sessionStorage.getItem('newIncomeList') || '[]');
            const listContainer = document.getElementById('newIncomeListContainer');
            const itemsContainer = document.getElementById('newIncomeItems');

            if (newIncomeList.length > 0) {
                listContainer.style.display = 'block';
                itemsContainer.innerHTML = newIncomeList.map((item, index) => `
                    <div class="new-income-item">
                        <div class="new-income-info">
                            <span class="new-income-type">${item.type}</span>
                            <span class="new-income-amount">Rp ${item.amount.toLocaleString()}</span>
                            <span class="new-income-date">${item.date}</span>
                        </div>
                        <button class="remove-btn" onclick="removeNewIncome(${index})">Ã—</button>
                    </div>
                `).join('');
            } else {
                listContainer.style.display = 'none';
            }
        }

        // åˆ é™¤æ–°æ”¶å…¥
        function removeNewIncome(index) {
            let newIncomeList = JSON.parse(sessionStorage.getItem('newIncomeList') || '[]');
            newIncomeList.splice(index, 1);
            sessionStorage.setItem('newIncomeList', JSON.stringify(newIncomeList));
            updateNewIncomeDisplay();
        }

        function confirmIncomeExpense() {
            const confirmChanges = document.getElementById('confirmChanges').value;

            // æ”¶é›†ç”¨æˆ·å¡«å†™çš„å…·ä½“æ•°æ®
            const financialData = {
                changes: confirmChanges,
                timestamp: new Date().toISOString()
            };

            // å¦‚æœæœ‰å˜åŒ–ï¼Œæ”¶é›†å…·ä½“çš„æ”¶å…¥æ”¯å‡ºæ•°æ®
            if (confirmChanges !== 'no_change') {
                // æ”¶å…¥å˜åŒ–
                if (confirmChanges === 'income_changed' || confirmChanges === 'both_changed') {
                    financialData.balance = document.getElementById('changeBalance')?.value || '';
                    financialData.salary = document.getElementById('changeSalary')?.value || '';
                    financialData.salaryDate = document.getElementById('changeSalaryDate')?.value || '25å·';
                    financialData.bonus = document.getElementById('changeBonus')?.value || '';
                    financialData.bonusDate = document.getElementById('changeBonusDate')?.value || '25å·';
                    financialData.otherIncome = document.getElementById('changeOtherIncome')?.value || '';
                    financialData.otherIncomeDate = document.getElementById('changeOtherIncomeDate')?.value || 'å¾…ç¡®è®¤';
                }

                // æ–°å¢æ”¶å…¥
                const newIncomeList = JSON.parse(sessionStorage.getItem('newIncomeList') || '[]');
                if (newIncomeList.length > 0) {
                    financialData.newIncome = newIncomeList;
                }

                // æ”¯å‡ºå˜åŒ–
                if (confirmChanges === 'expense_changed' || confirmChanges === 'both_changed') {
                    financialData.fixedExpense = document.getElementById('changeFixedExpense')?.value || '';
                    financialData.largeExpense = document.getElementById('changeLargeExpense')?.value || '';
                }
            }

            // ä¿å­˜ç¡®è®¤ä¿¡æ¯
            sessionStorage.setItem('analysisConfirmation', JSON.stringify(financialData));

            const chatContainer = document.getElementById('chatContainer');

            const confirmHTML = `
                <div class="message user">
                    <div class="avatar" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">æˆ‘</div>
                    <div class="message-content">
                        <div class="message-text">ç¡®è®¤ï¼Œå¼€å§‹åˆ†æ</div>
                    </div>
                </div>
            `;

            chatContainer.innerHTML += confirmHTML;

            const replyHTML = `
                <div class="message">
                    <div class="avatar">AI</div>
                    <div class="message-content">
                        <div class="message-text">
                            å¥½çš„ï¼å·²ç¡®è®¤ä¿¡æ¯ã€‚ç°åœ¨å¼€å§‹åˆ†æä½ çš„è´¢åŠ¡çŠ¶å†µ...
                        </div>
                    </div>
                </div>
            `;

            chatContainer.innerHTML += replyHTML;

            setTimeout(() => {
                showFullAnalysisReport();
            }, 500);
        }

        function showFullAnalysisReport() {
            const chatContainer = document.getElementById('chatContainer');

            // åŸºç¡€æ•°æ®
            const lastMonthIncome = 5000000;
            const lastMonthExpense = 3200000;
            const lastMonthPayment = 1200000;
            const balanceToThisMonth = lastMonthIncome - lastMonthExpense - lastMonthPayment; // 600000

            const receivedIncome = 3000000;
            const pendingIncome = 2500000;
            const totalIncome = receivedIncome + pendingIncome;

            const fixedExpense = 2000000;
            const largeExpense = 800000;
            const paidBills = 1200000;
            const totalExpense = fixedExpense + largeExpense + paidBills;

            const debtBeforeIncome = 4500000;
            const debtAfterIncome = 3200000;
            const overdueInterest = 150000;

            const credits = [
                { platform: 'Akulaku', amount: 8000000, rate: 2.5 },
                { platform: 'Kredivo', amount: 5000000, rate: 2.0 },
                { platform: 'Shopee', amount: 3000000, rate: 1.8 }
            ];

            const cashBeforeIncome = balanceToThisMonth + receivedIncome - totalExpense; // -400000
            const cashAfterIncome = balanceToThisMonth + totalIncome - totalExpense; // 2100000

            const bills = [
                { platform: 'Akulaku', amount: 2500000, daysLeft: 3, rate: 2.5, overdueRate: 5.0, priority: 'high' },
                { platform: 'Kredivo', amount: 1500000, daysLeft: 8, rate: 2.0, overdueRate: 4.5, priority: 'medium' },
                { platform: 'Shopee', amount: 800000, daysLeft: 15, rate: 1.8, overdueRate: 3.0, priority: 'low' }
            ];

            const cashGap = 400000;
            const recommendedLoan = 'Shopee';
            const loanRate = 1.8;
            const overdueCostRate = 5.0;
            const savings = 150000;

            // ç”ŸæˆæŠ¥å‘ŠHTML
            const reportHTML = `
                <div class="message">
                    <div class="avatar">AI</div>
                    <div class="message-content">
                        <div class="message-text">
                            <strong>ğŸ“Š æ™ºèƒ½èµ„é‡‘ç®¡ç†æŠ¥å‘Š</strong><br><br>
                            åŸºäºä½ çš„è´¢åŠ¡æ•°æ®ï¼ŒAIå·²ç”Ÿæˆæœ€ä¼˜è¿˜æ¬¾æ–¹æ¡ˆ
                        </div>

                        <!-- ç¬¬ä¸€éƒ¨åˆ†:åŸºç¡€æ•°æ®è®¡ç®— -->
                        <div class="report-section">
                            <div class="report-section-title">ç¬¬ä¸€éƒ¨åˆ†:åŸºç¡€æ•°æ®è®¡ç®—</div>

                            <!-- æ¨¡å—1: ç»“ä½™é‡‘é¢ -->
                            <div class="chart-card" style="background: linear-gradient(135deg, #E3F2FD 0%, #FFFFFF 100%); border: 2px solid #2196F3;">
                                <div class="section-header">1. ç»“ä½™é‡‘é¢(ä¸Šæœˆç»“ä½™) ğŸ’°</div>
                                <div class="data-row">
                                    <span class="data-label">ä¸Šæœˆæ”¶å…¥ï¼š</span>
                                    <span class="data-value">Rp ${lastMonthIncome.toLocaleString()}</span>
                                </div>
                                <div class="data-row">
                                    <span class="data-label">ä¸Šæœˆæ”¯å‡ºï¼š</span>
                                    <span class="data-value danger">-Rp ${lastMonthExpense.toLocaleString()}</span>
                                </div>
                                <div class="data-row">
                                    <span class="data-label">ä¸Šæœˆè¿˜æ¬¾ï¼š</span>
                                    <span class="data-value danger">-Rp ${lastMonthPayment.toLocaleString()}</span>
                                </div>
                                <div class="divider"></div>
                                <div class="data-row">
                                    <span class="data-label"><strong>å¯è½¬å…¥æœ¬æœˆï¼š</strong></span>
                                    <span class="data-value success" style="font-size:18px;">Rp ${balanceToThisMonth.toLocaleString()}</span>
                                </div>
                                <div style="font-size: 12px; color: #8A8F99; margin-top: 8px;">
                                    è¯´æ˜:åæ˜ ä¸ŠæœˆèŠ‚ä½™æˆ–ç¼ºå£,å¯ç”¨äºæœ¬æœˆè´Ÿå€ºå¿è¿˜
                                </div>
                            </div>

                            <!-- æ¨¡å—2-3: æœ¬æœˆèµ„é‡‘æµ -->
                            <div class="chart-card">
                                <div class="section-header">2-3. æœ¬æœˆèµ„é‡‘æµ ğŸ“ˆ</div>

                                <div style="margin-bottom: 12px;">
                                    <div style="font-size: 13px; font-weight: 600; color: #1F2D3D; margin-bottom: 8px;">æœ¬æœˆæ”¶å…¥:</div>
                                    <div class="data-row">
                                        <span class="data-label">å·²åˆ°è´¦æ”¶å…¥ï¼š</span>
                                        <span class="data-value">Rp ${receivedIncome.toLocaleString()} <span class="badge badge-green">å·²åˆ°è´¦</span></span>
                                    </div>
                                    <div class="data-row">
                                        <span class="data-label">æœªåˆ°è´¦æ”¶å…¥ï¼š</span>
                                        <span class="data-value">Rp ${pendingIncome.toLocaleString()} <span class="badge badge-orange">æœªåˆ°è´¦</span></span>
                                    </div>
                                    <div class="divider" style="margin: 8px 0;"></div>
                                    <div class="data-row">
                                        <span class="data-label"><strong>æ€»æ”¶å…¥ï¼š</strong></span>
                                        <span class="data-value success">Rp ${totalIncome.toLocaleString()}</span>
                                    </div>
                                </div>

                                <div>
                                    <div style="font-size: 13px; font-weight: 600; color: #1F2D3D; margin-bottom: 8px;">æœ¬æœˆæ”¯å‡º:</div>
                                    <div class="data-row">
                                        <span class="data-label">å›ºå®šæ”¯å‡º(ç§Ÿé‡‘ç­‰)ï¼š</span>
                                        <span class="data-value">Rp ${fixedExpense.toLocaleString()}</span>
                                    </div>
                                    <div class="data-row">
                                        <span class="data-label">å¤§é¢æ”¯å‡ºï¼š</span>
                                        <span class="data-value">Rp ${largeExpense.toLocaleString()}</span>
                                    </div>
                                    <div class="data-row">
                                        <span class="data-label">å·²è¿˜æ¬¾è´¦å•ï¼š</span>
                                        <span class="data-value">Rp ${paidBills.toLocaleString()}</span>
                                    </div>
                                    <div class="divider" style="margin: 8px 0;"></div>
                                    <div class="data-row">
                                        <span class="data-label"><strong>æ€»æ”¯å‡ºï¼š</strong></span>
                                        <span class="data-value danger" style="font-size:18px;">Rp ${totalExpense.toLocaleString()}</span>
                                    </div>
                                </div>
                            </div>

                            <!-- æ¨¡å—4: æ¬ æ¬¾è®¡ç®— -->
                            <div class="chart-card">
                                <div class="section-header">4. æ¬ æ¬¾è®¡ç®— âš ï¸</div>
                                <div class="data-row" style="background: #FFEBEE; padding: 10px; border-radius: 6px;">
                                    <span class="data-label"><strong>æ”¶å…¥æœªåˆ°è´¦å‰ï¼š</strong></span>
                                    <span class="data-value danger" style="font-size:16px;">Rp ${debtBeforeIncome.toLocaleString()}</span>
                                </div>
                                <div style="font-size: 12px; color: #8A8F99; margin-bottom: 12px;">
                                    åŒ…å«ä¹‹å‰å¾…è¿˜æ¬¾è´¦å• + é€¾æœŸç»“æ¯
                                </div>

                                <div class="data-row" style="background: #FFF3E0; padding: 10px; border-radius: 6px;">
                                    <span class="data-label"><strong>æ”¶å…¥åˆ°è´¦åï¼š</strong></span>
                                    <span class="data-value" style="font-size:16px; color: #FF9800;">Rp ${debtAfterIncome.toLocaleString()}</span>
                                </div>
                                <div style="font-size: 12px; color: #8A8F99; margin-bottom: 12px;">
                                    ä¹‹åå¾…è¿˜æ¬¾è´¦å•
                                </div>

                                <div class="data-row" style="background: #FFFDE7; padding: 10px; border-radius: 6px;">
                                    <span class="data-label"><strong>é€¾æœŸç»“æ¯ï¼š</strong></span>
                                    <span class="data-value badge-yellow" style="font-size:16px;">Rp ${overdueInterest.toLocaleString()}</span>
                                </div>
                                <div style="font-size: 12px; color: #F9A825; font-weight: 600;">
                                    ä¼šéšæ—¶é—´å¢é•¿,æ˜¯é‡è¦é£é™©ç‚¹
                                </div>
                            </div>

                            <!-- æ¨¡å—5: ä¿¡ç”¨é¢åº¦ -->
                            <div class="chart-card">
                                <div class="section-header">5. ä¿¡ç”¨é¢åº¦ ğŸ’³</div>
                                ${credits.map(credit => `
                                    <div class="credit-item">
                                        <div class="credit-platform">${credit.platform}:</div>
                                        <div class="credit-details">å¯ç”¨ Rp ${credit.amount.toLocaleString()} | åˆ©ç‡ ${credit.rate}%/æœˆ</div>
                                    </div>
                                `).join('')}
                                <div style="font-size: 12px; color: #8A8F99; margin-top: 8px;">
                                    ç”¨äºè¯„ä¼°æ˜¯å¦å¯ä»¥å€Ÿä½æ¯æ¬¾è¡¥ç°é‡‘æµç¼ºå£
                                </div>
                            </div>
                        </div>

                        <!-- ç¬¬äºŒéƒ¨åˆ†:ç°é‡‘æµä¸ä¼˜å…ˆçº§åˆ†æ -->
                        <div class="report-section">
                            <div class="report-section-title">ç¬¬äºŒéƒ¨åˆ†:ç°é‡‘æµä¸ä¼˜å…ˆçº§åˆ†æ</div>

                            <!-- æ¨¡å—6: å¯ç”¨èµ„é‡‘èƒ½åŠ› -->
                            <div class="chart-card">
                                <div class="section-header">6. å¯ç”¨èµ„é‡‘èƒ½åŠ› ğŸ“Š</div>
                                <div class="data-row" style="background: #FFEBEE; padding: 12px; border-radius: 6px;">
                                    <span class="data-label"><strong>æ”¶å…¥åˆ°è´¦å‰ï¼š</strong></span>
                                    <span class="data-value danger" style="font-size:18px;">Rp ${cashBeforeIncome.toLocaleString()}</span>
                                </div>
                                <div style="font-size: 12px; color: #8A8F99; margin-bottom: 8px;">
                                    è®¡ç®—:ç»“ä½™ + å·²åˆ°è´¦æ”¶å…¥ - æœ¬æœˆæ”¯å‡º
                                </div>
                                <div style="font-size: 13px; color: #F44336; font-weight: 600; margin-bottom: 12px;">
                                    çŠ¶æ€:ç°é‡‘æµçŸ­ç¼º,éœ€è¦ç­–ç•¥ä¼˜åŒ–
                                </div>

                                <div class="data-row" style="background: #E8F5E9; padding: 12px; border-radius: 6px;">
                                    <span class="data-label"><strong>æ”¶å…¥åˆ°è´¦åï¼š</strong></span>
                                    <span class="data-value success" style="font-size:18px;">Rp ${cashAfterIncome.toLocaleString()}</span>
                                </div>
                                <div style="font-size: 12px; color: #8A8F99; margin-bottom: 8px;">
                                    è®¡ç®—:ç»“ä½™ + æ€»æ”¶å…¥ - æœ¬æœˆæ”¯å‡º
                                </div>
                                <div style="font-size: 13px; color: #4CAF50; font-weight: 600;">
                                    çŠ¶æ€:å¯è¦†ç›–æ‰€æœ‰æ¬ æ¬¾
                                </div>
                            </div>

                            <!-- æ¨¡å—7: å€ºåŠ¡å¿è¿˜ä¼˜å…ˆçº§ -->
                            <div class="chart-card">
                                <div class="section-header">7. å€ºåŠ¡å¿è¿˜ä¼˜å…ˆçº§ ğŸ¯</div>
                                ${bills.map(bill => {
                                    const priorityClass = bill.priority === 'high' ? 'priority-high' :
                                                      bill.priority === 'medium' ? 'priority-medium' : 'priority-low';
                                    const priorityText = bill.priority === 'high' ? 'é«˜ä¼˜å…ˆçº§' :
                                                       bill.priority === 'medium' ? 'ä¸­ä¼˜å…ˆçº§' : 'ä½ä¼˜å…ˆçº§';
                                    const borderColor = bill.priority === 'high' ? 'çº¢è‰²è¾¹æ¡†' :
                                                     bill.priority === 'medium' ? 'æ©™è‰²è¾¹æ¡†' : 'ç»¿è‰²è¾¹æ¡†';
                                    return `
                                        <div class="priority-item ${priorityClass}">
                                            <div class="priority-header">
                                                <span class="priority-platform">${bill.platform}: Rp ${bill.amount.toLocaleString()} | ${bill.daysLeft}å¤©ååˆ°æœŸ</span>
                                            </div>
                                            <div class="priority-reason">
                                                åˆ©ç‡${bill.rate}% vs é€¾æœŸ${bill.overdueRate}%<br>
                                                ${bill.priority === 'high' ? 'åŸå› :åˆ©ç‡æœ€é«˜ä¸”å³å°†é€¾æœŸ' :
                                                  bill.priority === 'medium' ? 'åŸå› :é€¾æœŸè´¹ç”¨è¾ƒé«˜' :
                                                  'åŸå› :åˆ©ç‡è¾ƒä½,å¯å»¶å'}
                                            </div>
                                        </div>
                                    `;
                                }).join('')}
                            </div>

                            <!-- æ¨¡å—8: å€Ÿæ¬¾ä¸é€¾æœŸå¯¹æ¯” -->
                            <div class="chart-card">
                                <div class="section-header">8. å€Ÿæ¬¾ä¸é€¾æœŸå¯¹æ¯” âš¡</div>
                                <div class="data-row">
                                    <span class="data-label">ç°é‡‘ç¼ºå£ï¼š</span>
                                    <span class="data-value danger">Rp ${cashGap.toLocaleString()}</span>
                                </div>
                                <div class="data-row">
                                    <span class="data-label">æ¨èå€Ÿæ¬¾å¹³å°ï¼š</span>
                                    <span class="data-value">${recommendedLoan}</span>
                                </div>
                                <div class="data-row">
                                    <span class="data-label">ç†ç”±ï¼š</span>
                                    <span class="data-value">åˆ©ç‡æœ€ä½(${loanRate}%),ä½äºé€¾æœŸæˆæœ¬(${overdueCostRate}%)</span>
                                </div>
                                <div class="data-row">
                                    <span class="data-label">é¢„è®¡èŠ‚çœæˆæœ¬ï¼š</span>
                                    <span class="data-value success" style="font-size:18px;">Rp ${savings.toLocaleString()}</span>
                                </div>
                            </div>
                        </div>

                        <!-- ç¬¬ä¸‰éƒ¨åˆ†:ä¼˜åŒ–ç­–ç•¥ -->
                        <div class="report-section">
                            <div class="report-section-title">ç¬¬ä¸‰éƒ¨åˆ†:ä¼˜åŒ–ç­–ç•¥</div>

                            <!-- æ¨¡å—9: æ™ºèƒ½å¿è¿˜ç­–ç•¥ -->
                            <div class="chart-card">
                                <div class="section-header">9. æ™ºèƒ½å¿è¿˜ç­–ç•¥ ğŸ“…</div>
                                <div class="strategy-card strategy-green">
                                    <div style="font-weight: 600; color: #2E7D32; margin-bottom: 6px;">âœ… å»ºè®®å…ˆå¿è¿˜</div>
                                    <div style="font-size: 13px; color: #1F2D3D;">
                                        â€¢ åˆ©ç‡æœ€é«˜çš„è´·æ¬¾ (Akulaku 2.5%)<br>
                                        â€¢ é€¾æœŸè´¹ç”¨æœ€é«˜çš„è´¦å• (é€¾æœŸåˆ©ç‡ 5.0%)
                                    </div>
                                </div>
                                <div class="strategy-card strategy-orange">
                                    <div style="font-weight: 600; color: #E65100; margin-bottom: 6px;">â³ å»ºè®®å»¶æœŸ/å¾…å·¥èµ„åˆ°è´¦</div>
                                    <div style="font-size: 13px; color: #1F2D3D;">
                                        â€¢ åˆ©ç‡ä½ã€æ— éœ€ç«‹å³é€¾æœŸ (Shopee 1.8%)<br>
                                        â€¢ ç°é‡‘å¯ä¿ç•™ç”¨äºåŸºæœ¬ç”Ÿæ´»
                                    </div>
                                </div>
                            </div>

                            <!-- æ¨¡å—10: ç”Ÿæ´»ä¸æ”¯å‡ºå¹³è¡¡ -->
                            <div class="chart-card">
                                <div class="section-header">10. ç”Ÿæ´»ä¸æ”¯å‡ºå¹³è¡¡ ğŸ’¡</div>
                                <div class="suggestion-item suggestion-blue">
                                    <div class="suggestion-icon">ğŸ’™</div>
                                    <div class="suggestion-text">
                                        è‹¥å›ºå®šæ”¯å‡ºæ—¶é—´æ™šäºå·¥èµ„åˆ°è´¦ â†’ å…è®¸æå‰æ‰¿æ‹…éƒ¨åˆ†å›ºå®šè´¹ç”¨
                                    </div>
                                </div>
                                <div class="suggestion-item suggestion-yellow">
                                    <div class="suggestion-icon">ğŸ’›</div>
                                    <div class="suggestion-text">
                                        ä¿ç•™æœ€ä½ç”Ÿæ´»è´¹ Rp 500,000 ä½œä¸º"åº”æ€¥ç°é‡‘æ± "
                                    </div>
                                </div>
                                <div class="suggestion-item suggestion-purple">
                                    <div class="suggestion-icon">ğŸ’œ</div>
                                    <div class="suggestion-text">
                                        ä¼˜å…ˆå‹ç¼©éå¿…è¦æ”¯å‡ºä¿å­˜æµåŠ¨æ€§
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ç¬¬å››éƒ¨åˆ†:é•¿æœŸæ”¹å–„ -->
                        <div class="report-section">
                            <div class="report-section-title">ç¬¬å››éƒ¨åˆ†:é•¿æœŸæ”¹å–„</div>
                            <div class="improvement-box">
                                <div class="section-header">11-12. é•¿æœŸæ”¹å–„å»ºè®® ğŸ“ˆ</div>
                                <ul class="improvement-list">
                                    <li>ä¸‹æœˆéœ€è¦å‡å°‘æ”¯å‡º: Rp 800,000 æ‰èƒ½é¿å…ç°é‡‘çŸ­ç¼º</li>
                                    <li>å»ºè®®å¢åŠ æ”¶å…¥: Rp 1,000,000 å¯æ˜¾è‘—æ”¹å–„è´¢åŠ¡çŠ¶å†µ</li>
                                    <li>å‚¨è“„ç¼“å†²å»ºè®®: å»ºç«‹3ä¸ªæœˆç”Ÿæ´»è´¹å‚¨è“„ (çº¦ Rp 6,000,000)</li>
                                    <li>è‡ªåŠ¨é¢„ç®—è®¾ç½®: æ¨èè®¾ç½®è‡ªåŠ¨é¢„ç®—åˆ†ç±»ä¸è­¦å‘ŠåŠŸèƒ½</li>
                                </ul>
                            </div>
                        </div>

                        <!-- é£é™©è¯„ä¼° -->
                        <div class="report-section">
                            <div class="report-section-title">ç¬¬äº”éƒ¨åˆ†:é£é™©è¯„ä¼°ä¸å¥åº·åº¦</div>
                            <div class="chart-card" style="background: linear-gradient(135deg, #FFF3E0 0%, #FFFFFF 100%); border: 2px solid #FF9800;">
                                <div class="section-header">ğŸ¯ æ‚¨çš„è´¢åŠ¡å¥åº·è¯„åˆ†</div>
                                <div style="display: flex; align-items: center; justify-content: center; margin: 20px 0;">
                                    <div style="width: 120px; height: 120px; border-radius: 50%; background: conic-gradient(#FF9800 ${65 * 3.6}deg, #FFEBEE 0deg); display: flex; align-items: center; justify-content: center; position: relative;">
                                        <div style="width: 100px; height: 100px; border-radius: 50%; background: white; display: flex; align-items: center; justify-content: center; flex-direction: column;">
                                            <span style="font-size: 32px; font-weight: 700; color: #FF9800;">65</span>
                                            <span style="font-size: 12px; color: #8A8F99;">/100åˆ†</span>
                                        </div>
                                    </div>
                                </div>
                                <div style="text-align: center; margin-bottom: 16px;">
                                    <span class="badge badge-orange" style="font-size: 14px;">ä¸­ç­‰é£é™©</span>
                                </div>
                                <div style="font-size: 13px; color: #1F2D3D; line-height: 1.8;">
                                    <strong>é£é™©è¯„ä¼°ï¼š</strong><br>
                                    â€¢ ç°é‡‘æµå­˜åœ¨çŸ­æœŸç¼ºå£ï¼Œéœ€è¦ä¼˜åŒ–æ”¯å‡ºç»“æ„<br>
                                    â€¢ é€¾æœŸç»“æ¯è¾ƒé«˜ï¼Œå»ºè®®ä¼˜å…ˆå¤„ç†é«˜åˆ©ç‡å€ºåŠ¡<br>
                                    â€¢ æ”¶å…¥æ¥æºç›¸å¯¹å•ä¸€ï¼Œå»ºè®®å¢åŠ å¤šå…ƒåŒ–æ”¶å…¥<br><br>
                                    <strong>å¥åº·å»ºè®®ï¼š</strong><br>
                                    â€¢ å»ºç«‹åº”æ€¥ç°é‡‘æ± ï¼ˆ3-6ä¸ªæœˆç”Ÿæ´»è´¹ï¼‰<br>
                                    â€¢ å‡å°‘éå¿…è¦æ”¯å‡ºï¼Œæé«˜æµåŠ¨æ€§<br>
                                    â€¢ é¿å…æ–°å¢é«˜åˆ©ç‡å€ºåŠ¡
                                </div>
                            </div>
                        </div>

                        <!-- è¡ŒåŠ¨è®¡åˆ’ -->
                        <div class="report-section">
                            <div class="report-section-title">ç¬¬å…­éƒ¨åˆ†:ä¸‹ä¸€æ­¥è¡ŒåŠ¨è®¡åˆ’</div>
                            <div class="chart-card">
                                <div class="section-header">ğŸ“‹ åˆ†é˜¶æ®µè¡ŒåŠ¨è®¡åˆ’</div>

                                <div style="margin-bottom: 16px;">
                                    <div style="background: #FFEBEE; padding: 12px; border-radius: 8px; border-left: 4px solid #F44336;">
                                        <div style="font-weight: 600; color: #C62828; margin-bottom: 8px; font-size: 15px;">ğŸ”´ çŸ­æœŸè¡ŒåŠ¨ï¼ˆ1-7å¤©å†…ï¼‰</div>
                                        <ul style="margin-left: 20px; font-size: 13px; color: #1F2D3D; line-height: 1.8;">
                                            <li>ä¼˜å…ˆå¿è¿˜Akulakuè´·æ¬¾ï¼ˆåˆ©ç‡2.5%ï¼Œ3å¤©ååˆ°æœŸï¼‰</li>
                                            <li>å¤„ç†é€¾æœŸè´¦å•ï¼Œå‡å°‘é€¾æœŸç»“æ¯å¢é•¿</li>
                                            <li>ç«‹å³åœæ­¢æ–°å¢é«˜åˆ©ç‡å€ºåŠ¡</li>
                                            <li>ä¿ç•™è‡³å°‘ Rp 500,000 ä½œä¸ºåº”æ€¥ç°é‡‘</li>
                                        </ul>
                                    </div>
                                </div>

                                <div style="margin-bottom: 16px;">
                                    <div style="background: #FFF3E0; padding: 12px; border-radius: 8px; border-left: 4px solid #FF9800;">
                                        <div style="font-weight: 600; color: #E65100; margin-bottom: 8px; font-size: 15px;">ğŸŸ  ä¸­æœŸç›®æ ‡ï¼ˆ1ä¸ªæœˆå†…ï¼‰</div>
                                        <ul style="margin-left: 20px; font-size: 13px; color: #1F2D3D; line-height: 1.8;">
                                            <li>å‡å°‘éå¿…è¦æ”¯å‡º Rp 800,000</li>
                                            <li>æ¢ç´¢å¢åŠ æ”¶å…¥çš„é€”å¾„ï¼ˆå…¼èŒã€å‰¯ä¸šï¼‰</li>
                                            <li>åˆ¶å®šè¯¦ç»†é¢„ç®—è®¡åˆ’ï¼Œè®¾ç½®æ”¯å‡ºæé†’</li>
                                            <li>å»ºç«‹1ä¸ªæœˆç”Ÿæ´»è´¹å‚¨å¤‡ï¼ˆçº¦ Rp 2,000,000ï¼‰</li>
                                        </ul>
                                    </div>
                                </div>

                                <div>
                                    <div style="background: #E8F5E9; padding: 12px; border-radius: 8px; border-left: 4px solid #4CAF50;">
                                        <div style="font-weight: 600; color: #2E7D32; margin-bottom: 8px; font-size: 15px;">ğŸŸ¢ é•¿æœŸè§„åˆ’ï¼ˆ3-6ä¸ªæœˆï¼‰</div>
                                        <ul style="margin-left: 20px; font-size: 13px; color: #1F2D3D; line-height: 1.8;">
                                            <li>å»ºç«‹3ä¸ªæœˆç”Ÿæ´»è´¹åº”æ€¥å‚¨å¤‡ï¼ˆRp 6,000,000ï¼‰</li>
                                            <li>é€æ­¥é™ä½å€ºåŠ¡æ¯”ä¾‹è‡³å®‰å…¨æ°´å¹³ï¼ˆ<50%ï¼‰</li>
                                            <li>å¯»æ‰¾æ›´é«˜æ”¶ç›Šçš„æŠ•èµ„æˆ–å‚¨è“„æ–¹å¼</li>
                                            <li>è®¾å®šæ˜ç¡®çš„è´¢åŠ¡ç›®æ ‡ï¼ˆè´­æˆ¿ã€æŠ•èµ„ç­‰ï¼‰</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- æ ¸å¿ƒå»ºè®®æ€»ç»“ -->
                        <div class="report-section">
                            <div class="report-section-title">ç¬¬ä¸ƒéƒ¨åˆ†:æ ¸å¿ƒå»ºè®®æ€»ç»“</div>
                            <div class="chart-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none;">
                                <div class="section-header" style="color: white;">â­ æ ¸å¿ƒå»ºè®® - å¿…è¯»</div>
                                <div style="color: white; line-height: 2; font-size: 14px;">
                                    <strong>1. å¹³è¡¡çŸ­æœŸä¸é•¿æœŸç›®æ ‡ï¼š</strong><br>
                                    çŸ­æœŸå†…ä¼˜å…ˆå¤„ç†é«˜åˆ©ç‡å€ºåŠ¡ï¼Œä½†ä¸è¦å½±å“åŸºæœ¬ç”Ÿæ´»ã€‚å»ºç«‹åº”æ€¥å‚¨å¤‡æ˜¯é•¿æœŸè´¢åŠ¡ç¨³å®šçš„åŸºçŸ³ã€‚<br><br>
                                    <strong>2. ä¼˜åŒ–è´Ÿå€ºç»“æ„ï¼š</strong><br>
                                    ä½¿ç”¨ä½åˆ©ç‡è´·æ¬¾ï¼ˆShopee 1.8%ï¼‰æ›¿æ¢é«˜åˆ©ç‡å€ºåŠ¡ï¼Œå¯æ˜¾è‘—é™ä½åˆ©æ¯æ”¯å‡ºã€‚åŒæ—¶å‡å°‘æ–°å¢å€ºåŠ¡ã€‚<br><br>
                                    <strong>3. æé«˜æ”¶å…¥ä¸æ”¯å‡ºæ¯”ï¼š</strong><br>
                                    ç›®æ ‡æ˜¯æ¯æœˆå‡€æ”¶å…¥ï¼ˆæ”¶å…¥-æ”¯å‡ºï¼‰è‡³å°‘ä¸ºæ­£çš„ Rp 500,000ã€‚é€šè¿‡å¢åŠ æ”¶å…¥æˆ–å‡å°‘æ”¯å‡ºæ¥å®ç°ã€‚<br><br>
                                    <strong>4. æŒç»­ç›‘æ§ä¸è°ƒæ•´ï¼š</strong><br>
                                    æ¯æœˆå›é¡¾è´¢åŠ¡çŠ¶å†µï¼Œæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´è®¡åˆ’ã€‚è´¢åŠ¡å¥åº·éœ€è¦æŒç»­å…³æ³¨å’Œä¼˜åŒ–ã€‚
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            chatContainer.innerHTML += reportHTML;

            setTimeout(() => {
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }, 100);
        }

        // å¤„ç†é”®ç›˜äº‹ä»¶ï¼ˆEnterå‘é€ï¼‰
        function handleKeyDown(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        // å‘é€æ¶ˆæ¯
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();

            if (!message) return;

            const chatContainer = document.getElementById('chatContainer');

            // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
            const userHTML = `
                <div class="message user">
                    <div class="avatar" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">æˆ‘</div>
                    <div class="message-content">
                        <div class="message-text">
                            ${message}
                        </div>
                    </div>
                </div>
            `;
            chatContainer.innerHTML += userHTML;

            // æ¸…ç©ºè¾“å…¥æ¡†
            input.value = '';
            input.style.height = '44px';

            // æ»šåŠ¨åˆ°åº•éƒ¨
            setTimeout(() => {
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }, 100);

            // æ¨¡æ‹ŸAIå›å¤
            setTimeout(() => {
                const response = generateResponse(message);
                const aiHTML = `
                    <div class="message">
                        <div class="avatar">AI</div>
                        <div class="message-content">
                            <div class="message-text">
                                ${response}
                            </div>
                        </div>
                    </div>
                `;
                chatContainer.innerHTML += aiHTML;
                setTimeout(() => {
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }, 100);
            }, 500);
        }

        // æ ¹æ®ç”¨æˆ·é—®é¢˜ç”Ÿæˆå›å¤
        function generateResponse(question) {
            const lowerQuestion = question.toLowerCase();

            // å…³äºè¿˜æ¬¾ä¼˜å…ˆçº§
            if (lowerQuestion.includes('ä¼˜å…ˆ') || lowerQuestion.includes('å…ˆè¿˜')) {
                return `æ ¹æ®ä½ çš„è´¢åŠ¡çŠ¶å†µï¼Œè¿˜æ¬¾ä¼˜å…ˆçº§å¦‚ä¸‹ï¼š<br><br>
                <strong>ğŸ”´ é«˜ä¼˜å…ˆçº§ï¼ˆç«‹å³å¤„ç†ï¼‰ï¼š</strong><br>
                â€¢ Akulaku - Rp 2,500,000ï¼ˆåˆ©ç‡2.5%ï¼Œ3å¤©ååˆ°æœŸï¼‰<br>
                â€¢ é€¾æœŸè´¦å• - åˆ©ç‡é«˜è¾¾5.0%ï¼Œå¿…é¡»å°½å¿«å¤„ç†<br><br>
                <strong>ğŸŸ  ä¸­ä¼˜å…ˆçº§ï¼ˆ1-2å‘¨å†…ï¼‰ï¼š</strong><br>
                â€¢ Kredivo - Rp 1,500,000ï¼ˆåˆ©ç‡2.0%ï¼‰<br><br>
                <strong>ğŸŸ¢ ä½ä¼˜å…ˆçº§ï¼ˆå¯ä»¥å»¶åï¼‰ï¼š</strong><br>
                â€¢ Shopee - Rp 800,000ï¼ˆåˆ©ç‡1.8%ï¼Œ15å¤©ååˆ°æœŸï¼‰`;
            }

            // å…³äºæ”¶å…¥
            if (lowerQuestion.includes('æ”¶å…¥') || lowerQuestion.includes('å·¥èµ„') || lowerQuestion.includes('é’±')) {
                return `ä½ çš„æ”¶å…¥æƒ…å†µï¼š<br><br>
                â€¢ å·²åˆ°è´¦æ”¶å…¥ï¼šRp 3,000,000<br>
                â€¢ æœªåˆ°è´¦æ”¶å…¥ï¼šRp 2,500,000<br>
                â€¢ æœ¬æœˆæ€»æ”¶å…¥ï¼šRp 5,500,000<br><br>
                å»ºè®®åœ¨æ”¶å…¥åˆ°è´¦åï¼Œä¼˜å…ˆå¤„ç†é«˜åˆ©ç‡å€ºåŠ¡ï¼Œç„¶åå»ºç«‹åº”æ€¥å‚¨å¤‡ã€‚`;
            }

            // å…³äºæ”¯å‡º
            if (lowerQuestion.includes('æ”¯å‡º') || lowerQuestion.includes('èŠ±è´¹') || lowerQuestion.includes('é’±')) {
                return `ä½ çš„æ”¯å‡ºæƒ…å†µï¼š<br><br>
                â€¢ å›ºå®šæ”¯å‡ºï¼šRp 2,000,000<br>
                â€¢ å¤§é¢æ”¯å‡ºï¼šRp 800,000<br>
                â€¢ å·²è¿˜æ¬¾è´¦å•ï¼šRp 1,200,000<br>
                â€¢ æœ¬æœˆæ€»æ”¯å‡ºï¼šRp 4,000,000<br><br>
                å»ºè®®ï¼šä¸‹ä¸ªæœˆå‡å°‘éå¿…è¦æ”¯å‡º Rp 800,000ï¼Œå¯é¿å…ç°é‡‘çŸ­ç¼ºã€‚`;
            }

            // å…³äºå€ºåŠ¡
            if (lowerQuestion.includes('å€ºåŠ¡') || lowerQuestion.includes('æ¬ æ¬¾') || lowerQuestion.includes('è´Ÿå€º')) {
                return `ä½ çš„å€ºåŠ¡çŠ¶å†µï¼š<br><br>
                â€¢ æ”¶å…¥æœªåˆ°è´¦å‰ï¼šRp 4,500,000<br>
                â€¢ æ”¶å…¥åˆ°è´¦åï¼šRp 3,200,000<br>
                â€¢ é€¾æœŸç»“æ¯ï¼šRp 150,000<br><br>
                å¯ç”¨ä¿¡ç”¨é¢åº¦ï¼š<br>
                â€¢ Akulakuï¼šRp 8,000,000ï¼ˆ2.5%/æœˆï¼‰<br>
                â€¢ Kredivoï¼šRp 5,000,000ï¼ˆ2.0%/æœˆï¼‰<br>
                â€¢ Shopeeï¼šRp 3,000,000ï¼ˆ1.8%/æœˆï¼‰<br><br>
                å»ºè®®ä½¿ç”¨Shopeeçš„ä½åˆ©ç‡è´·æ¬¾æ¥è¡¥å……ç°é‡‘æµç¼ºå£ã€‚`;
            }

            // å…³äºç°é‡‘æµ
            if (lowerQuestion.includes('ç°é‡‘æµ') || lowerQuestion.includes('èµ„é‡‘') || lowerQuestion.includes('æµåŠ¨')) {
                return `ä½ çš„ç°é‡‘æµçŠ¶å†µï¼š<br><br>
                <strong>æ”¶å…¥åˆ°è´¦å‰ï¼š</strong>Rp -400,000ï¼ˆç°é‡‘æµçŸ­ç¼ºï¼‰<br>
                <strong>æ”¶å…¥åˆ°è´¦åï¼š</strong>Rp 2,100,000ï¼ˆå¯è¦†ç›–æ‰€æœ‰æ¬ æ¬¾ï¼‰<br><br>
                ç°é‡‘ç¼ºå£ï¼šRp 400,000<br>
                å»ºè®®å€Ÿæ¬¾ï¼šShopeeï¼ˆåˆ©ç‡1.8%ï¼‰<br>
                é¢„è®¡èŠ‚çœï¼šRp 150,000ï¼ˆç›¸æ¯”é€¾æœŸï¼‰`;
            }

            // å…³äºå‚¨è“„
            if (lowerQuestion.includes('å‚¨è“„') || lowerQuestion.includes('å­˜é’±') || lowerQuestion.includes('å‚¨å¤‡')) {
                return `å‚¨è“„å»ºè®®ï¼š<br><br>
                â€¢ åº”æ€¥ç°é‡‘æ± ï¼šä¿ç•™ Rp 500,000<br>
                â€¢ 1ä¸ªæœˆå‚¨å¤‡ï¼šçº¦ Rp 2,000,000<br>
                â€¢ 3ä¸ªæœˆå‚¨å¤‡ï¼šçº¦ Rp 6,000,000<br><br>
                å»ºè®®å»ºç«‹3ä¸ªæœˆç”Ÿæ´»è´¹ä½œä¸ºåº”æ€¥å‚¨å¤‡ï¼Œè¿™æ˜¯è´¢åŠ¡ç¨³å®šçš„åŸºçŸ³ã€‚`;
            }

            // å…³äºæ”¹å–„å»ºè®®
            if (lowerQuestion.includes('æ”¹å–„') || lowerQuestion.includes('å»ºè®®') || lowerQuestion.includes('æ€ä¹ˆåš')) {
                return `æ”¹å–„å»ºè®®ï¼š<br><br>
                <strong>çŸ­æœŸï¼ˆ1-7å¤©ï¼‰ï¼š</strong><br>
                â€¢ ä¼˜å…ˆå¿è¿˜Akulakuè´·æ¬¾<br>
                â€¢ å¤„ç†é€¾æœŸè´¦å•<br>
                â€¢ åœæ­¢æ–°å¢é«˜åˆ©ç‡å€ºåŠ¡<br><br>
                <strong>ä¸­æœŸï¼ˆ1ä¸ªæœˆï¼‰ï¼š</strong><br>
                â€¢ å‡å°‘æ”¯å‡º Rp 800,000<br>
                â€¢ æ¢ç´¢å¢åŠ æ”¶å…¥é€”å¾„<br>
                â€¢ å»ºç«‹è¯¦ç»†é¢„ç®—è®¡åˆ’<br><br>
                <strong>é•¿æœŸï¼ˆ3-6ä¸ªæœˆï¼‰ï¼š</strong><br>
                â€¢ å»ºç«‹3ä¸ªæœˆåº”æ€¥å‚¨å¤‡<br>
                â€¢ é™ä½å€ºåŠ¡æ¯”ä¾‹è‡³50%ä»¥ä¸‹<br>
                â€¢ å¯»æ‰¾æ›´é«˜æ”¶ç›Šçš„æŠ•èµ„æ–¹å¼`;
            }

            // å…³äºé£é™©
            if (lowerQuestion.includes('é£é™©') || lowerQuestion.includes('å®‰å…¨') || lowerQuestion.includes('è¯„åˆ†')) {
                return `è´¢åŠ¡å¥åº·è¯„åˆ†ï¼š65åˆ†ï¼ˆä¸­ç­‰é£é™©ï¼‰<br><br>
                <strong>é£é™©è¯„ä¼°ï¼š</strong><br>
                â€¢ ç°é‡‘æµå­˜åœ¨çŸ­æœŸç¼ºå£<br>
                â€¢ é€¾æœŸç»“æ¯è¾ƒé«˜<br>
                â€¢ æ”¶å…¥æ¥æºç›¸å¯¹å•ä¸€<br><br>
                <strong>å¥åº·å»ºè®®ï¼š</strong><br>
                â€¢ å»ºç«‹åº”æ€¥ç°é‡‘æ± <br>
                â€¢ å‡å°‘éå¿…è¦æ”¯å‡º<br>
                â€¢ é¿å…æ–°å¢é«˜åˆ©ç‡å€ºåŠ¡`;
            }

            // é»˜è®¤å›å¤
            return `æ„Ÿè°¢ä½ çš„æé—®ï¼ğŸ“Š<br><br>
            æˆ‘å¯ä»¥å¸®ä½ åˆ†æä»¥ä¸‹å†…å®¹ï¼š<br>
            â€¢ è¿˜æ¬¾ä¼˜å…ˆçº§å»ºè®®<br>
            â€¢ æ”¶å…¥æ”¯å‡ºæƒ…å†µ<br>
            â€¢ å€ºåŠ¡çŠ¶å†µåˆ†æ<br>
            â€¢ ç°é‡‘æµç®¡ç†<br>
            â€¢ å‚¨è“„ä¸å‚¨å¤‡å»ºè®®<br>
            â€¢ æ”¹å–„å»ºè®®<br>
            â€¢ é£é™©è¯„ä¼°<br><br>
            è¯·å‘Šè¯‰æˆ‘ä½ æƒ³äº†è§£å“ªæ–¹é¢çš„å†…å®¹ï¼Ÿ`;
        }
    </script>
</body>
</html>
